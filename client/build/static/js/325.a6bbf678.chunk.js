"use strict";(self.webpackChunkwingrow=self.webpackChunkwingrow||[]).push([[325],{77325:function(e,o,s){s.r(o),s.d(o,{default:function(){return C}});var n=s(4942),t=s(1413),l=s(29439),a=s(72791),r=s(36151),i=s(27391),c=s(96656),u=s(64387),g=s(20890),m=s(57689),d=s(11087),h=s(36457),p=s(21840),f=s(75985),v=(s(5462),s(1664)),x=s(44252),w=s(80184),b=h.Z.getCurrentUser();function C(e){var o=e.date,s=e.t;(0,a.useEffect)((function(){b&&(h.Z.logout().then((function(){f.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})),window.location.reload())}),[]);var C,j,Z,O=(0,m.s0)(),k=(0,m.TH)().state,N=(0,a.useState)(!1),y=(0,l.Z)(N,2),S=(y[0],y[1]),A=(0,x.Z)().width;(0,a.useEffect)((function(){S(A<850)}),[A]),null===k?C="login":(j=k.id,C=k.path,Z=k.bookedStalls),console.log("hello",C),console.log("date is ",o);var P=(0,a.useState)(!1),B=(0,l.Z)(P,2),H=B[0],L=B[1],z=(0,a.useState)({phone:"",password:"hello"}),F=(0,l.Z)(z,2),T=F[0],_=F[1];function I(e){try{var o=(0,v.S)(e);return console.log("hi",o),o.isValid()}catch(s){return!1}}return(0,w.jsxs)("div",{className:"authContainer",children:[(0,w.jsx)(f.Ix,{position:"top-right",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),(0,w.jsx)(f.Ix,{}),H?(0,w.jsx)(p.Z,{}):(0,w.jsxs)("div",{className:"authbox",children:[(0,w.jsx)("img",{className:"login_image",src:"./images/2.png",alt:"logo"}),(0,w.jsxs)("form",{autocomplete:"new-password",onSubmit:function(e){if(e.preventDefault(),T.phone){var s=I(T.phone);console.log("hello",s),L(!0),h.Z.login(T.phone,T.role,T.password).then((function(e){"farmer"===e.role&&(f.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){"login"===C?O("/farmers"):O("/home/temp/stallsTemp/${Id}/paymentpage",{state:{bookStall:Z,d:o}}),window.location.reload()}),1e3)),"admin"===e.role&&(f.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){O("/admin"),window.location.reload()}),1e3)),"employee"===e.role&&(f.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){O("/employee"),window.location.reload()}),1e3)),"customer"===e.role&&(f.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){O("/customers"),window.location.reload()}),1e3)),L(!1)}),(function(e){console.log(e),f.Am.warn("Login failed",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),_({phone:"",password:""}),L(!1)}))}else f.Am.warn("data invalid",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},className:"login_details",children:[(0,w.jsx)("img",{className:"form-logo",src:".\\images\\logo.png",alt:"form-logo"}),(0,w.jsx)(g.Z,{component:"h1",variant:"h5",className:"form-link",children:(0,w.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"20px"},children:s("welcome_message")})}),(0,w.jsx)(g.Z,{mt:2,component:"h1",variant:"h5",children:(0,w.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"20px"},children:s("login_here")})}),(0,w.jsx)(i.Z,{sx:{width:"80%",marginLeft:"0rem"},inputProps:{autoComplete:"off"},inputlabelprops:{style:{fontSize:16,fontFamily:"Arturo"}},margin:"normal",required:!0,fullWidth:!0,id:"phone",label:"Mobile Number",name:"phone",value:T.phone,autoFocus:!0,color:"success",className:"heading input",onChange:function(e){var o=e.target,s=o.name,l=o.value,a=I(l);console.log("hello--",a),_((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,n.Z)({},s,l))}))}}),(0,w.jsxs)(c.Z,{sx:{width:"80%",marginLeft:"0rem"},inputProps:{autoComplete:"off"},inputlabelprops:{style:{fontSize:16,fontFamily:"Arturo"}},margin:"normal",required:!0,fullWidth:!0,id:"role",label:"Role",name:"role",value:T.role,autoFocus:!0,color:"success",className:"heading input",onChange:function(e){var o=e.target,s=o.name,l=o.value;_((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,n.Z)({},s,l))}))},children:[(0,w.jsx)(u.Z,{sx:{fontSize:"1.3rem",fontFamily:"Arturo"},value:"farmer",children:(0,w.jsx)("span",{className:"heading3",children:"Producer"})}),(0,w.jsx)(u.Z,{sx:{fontSize:"1.3rem",fontFamily:"Arturo"},value:"customer",children:(0,w.jsx)("span",{className:"heading3",children:"Consumer"})})]}),(0,w.jsx)(r.Z,{className:"form-btn",type:"submit",color:"success",variant:"contained",size:"large",sx:{mt:3,mb:2},children:s("login")}),(0,w.jsxs)(g.Z,{className:"form-link",mt:2,children:[(0,w.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"15px"},children:s("new_to_wingrow")}),(0,w.jsx)(d.rU,{to:{pathname:"/Register",state:{path:"stall",id:j,bookedStalls:Z}},children:s("register")})]})]})]}),(0,w.jsx)("div",{className:"pageBottom",style:{height:"100px"}})]})}}}]);
//# sourceMappingURL=325.a6bbf678.chunk.js.map