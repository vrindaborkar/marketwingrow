"use strict";(self.webpackChunkwingrow=self.webpackChunkwingrow||[]).push([[512],{6512:function(e,a,t){t.r(a),t.d(a,{default:function(){return X}});var s=t(7762),r=t(3433),n=t(9439),l=t(2791),i=t(7689),c=t(184),o=function(){return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(i.j3,{})})},d=t(4942),m=t(1840),h=t(5967),u=t(3623);h.kL.register(h.ZL,h.uw,h.f$,h.u,h.De);var f=function(e){var a,t=e.filterIn,s=e.filterOut;e.handleChangeMarket,e.fromDate,e.setfromDate,e.toDate,e.settoDate,e.value,e.setValue,e.handleSearch,e.market,e.farmersMarket,e.open,e.setOpen,e.handleClose,e.handleOpen,e.handleSearchmarkets,e.handleSearchDate;console.log("in--\x3e",t),console.log("out---\x3e",s);var r={Hadapsar:0,Kharadi:1,"Karve Nagar":2,"Bramhasun City":3,wanawadi:4,Magarpatta:5,"Amanora City":6},n=new Array(0,0,0,0,0,0,0),l=new Array(0,0,0,0,0,0,0),i=[];t&&t.forEach((function(e){var a=e.market,t=e.purchase_quantity,s=e.purchase_rate;n[r[a]]+=t*s})),s&&s.forEach((function(e){var a=e.market,t=e.sales_quantity,s=e.sales_rate;l[r[a]]+=t*s})),l&&l.forEach((function(e,a){var t=l[a]-n[a];i.push(t)})),i&&i.forEach((function(e){console.log("netmarket :",e)}));var o={labels:["Hadapsar","Kharadi","Karve Nagar","Bramhasun City","wanawadi","Magarpatta","Amanora City"],datasets:[(a={label:"Data",backgroundColor:"green",borderColor:"black",borderWidth:1,data:i},(0,d.Z)(a,"backgroundColor",["rgba(255, 99, 132, 0.3)","rgba(255, 159, 64, 0.3)","rgba(255, 205, 86, 0.3)","rgba(75, 192, 192, 0.3)","rgba(54, 162, 235, 0.3)","rgba(153, 102, 255, 0.3)","rgba(201, 203, 207, 0.3)"]),(0,d.Z)(a,"borderColor",["rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(54, 162, 235)","rgb(153, 102, 255)","rgb(201, 203, 207)"]),(0,d.Z)(a,"borderWidth",1),(0,d.Z)(a,"responsive",!0),a)]};return(0,c.jsxs)("div",{className:"adminrev-body",children:[(0,c.jsx)("div",{className:"book-btn-section",children:(0,c.jsx)("h1",{children:"Commodity data"})}),(0,c.jsx)("div",{class:"chart-container",children:(0,c.jsx)(u.$Q,{data:o,options:{},className:"graphbar"})})]})},x=t(4165),p=t(5861),v=t(6151),j=t(7391),g=t(1889),b=t(4569),_=t.n(b),N=t(8704),k=function(){var e=(0,l.useState)(""),a=(0,n.Z)(e,2),t=a[0],s=a[1],i=(0,l.useState)(""),o=(0,n.Z)(i,2),d=o[0],m=o[1],h=(0,l.useState)(""),u=(0,n.Z)(h,2),f=(u[0],u[1],l.useState([])),b=(0,n.Z)(f,2),k=b[0],y=b[1],Z=(0,l.useState)((new Date).toISOString().split("T")[0]),S=(0,n.Z)(Z,2),D=S[0],w=(S[1],(0,l.useState)([])),C=(0,n.Z)(w,2),M=C[0],Y=C[1],A=[];(0,l.useEffect)((function(){function e(){return(e=(0,p.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().get("https://wingrowmarket.com:8443/getMarket").then((function(e){if(e){var a=e.data;Y(a)}})).catch((function(e){console.log(e.message)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),M&&M.forEach((function(e){A.push((0,c.jsxs)("div",{className:"box",children:[(0,c.jsxs)("p",{children:["MarketName : ",e.marketName]}),(0,c.jsxs)("p",{children:["Direction :",e.direction]}),e.offers&&e.offers.forEach((function(e){return(0,c.jsx)("p",{children:e})}))]}))}));var W=function(){var e=(0,p.Z)((0,x.Z)().mark((function e(a){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),M.push({marketName:t,direction:d,tags:k,date:D}),e.next=4,_().post("https://wingrowmarket.com:8443/addMarket",{marketName:t,direction:d,tags:k,date:D}).then((function(e){e&&(console.log("success"),m(""),y([]),s(""))})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return(0,c.jsx)("div",{children:(0,c.jsxs)("form",{className:"register_details",component:"form",noValidate:!0,onSubmit:W,sx:{mt:3},children:[(0,c.jsxs)(g.ZP,{className:"input-div-holder",container:!0,spacing:2,children:[(0,c.jsx)(g.ZP,{item:!0,xs:12,sm:6,children:(0,c.jsx)(j.Z,{inputlabelprops:{style:{fontSize:14,fontFamily:"Arturo"}},autoComplete:"nope",inputProps:{autoComplete:"off"},name:"marketName",value:t,onChange:function(e){return s(e.target.value)},required:!0,fullWidth:!0,id:"firstName",label:"Market Name",autoFocus:!0,color:"success",className:"textfield"})}),(0,c.jsx)(g.ZP,{item:!0,xs:12,sm:6,children:(0,c.jsx)(j.Z,{inputProps:{autoComplete:"off"},inputlabelprops:{style:{fontSize:14,fontFamily:"Arturo"}},required:!0,fullWidth:!0,id:"lastName",label:"Direction",name:"Direction",value:d,onChange:function(e){return m(e.target.value)},autoComplete:"nope",color:"success",className:"textfield registerLabel"})}),(0,c.jsx)(g.ZP,{item:!0,xs:12,children:(0,c.jsx)(N.V,{inputProps:{autoComplete:"off"},fullWidth:!0,tags:k,handleDelete:function(e){var a=k.slice(0);a.splice(e,1),y(a)},handleAddition:function(e){y([].concat((0,r.Z)(k),[e]))},placeholder:"Add offers",allowNew:!0,autofocus:!1,minQueryLength:1,className:"textfield",color:"success",classNames:{suggestions:"tag-suggestions"}})})]}),(0,c.jsx)(v.Z,{item:!0,xs:12,type:"submit",fullWidth:!0,className:"signup-btn",variant:"contained",color:"success",size:"large",sx:{mt:3,mb:2},children:(0,c.jsx)("span",{className:"heading",children:"Add"})})]})})},y=(t(1252),t(9504)),Z=t(890),S=function(e){var a=e.header,t=e.value;return(0,c.jsx)("div",{className:"card_layout",children:(0,c.jsxs)(y.Z,{className:"card-content",children:[(0,c.jsx)(Z.Z,{variant:"h5",component:"div",children:(0,c.jsx)("b",{className:"total-number",children:t})}),(0,c.jsx)(Z.Z,{className:"tag",sx:{fontSize:14},color:"text.secondary",gutterBottom:!0,children:a})]})})},D=t(9143),w=t(4925),C=t(4387),M=t(6362),Y=t(4475),A=t(3223);function W(e){var a=e.handleChangeMarket,t=e.fromDate,s=e.setfromDate,r=e.toDate,n=e.settoDate,l=e.value,i=e.setValue,o=e.handleSearch,d=e.farmersMarket,m=e.market,h=e.handleClose,u=e.handleOpen,f=e.open,x=e.handleSearchmarkets,p=e.handleSearchDate,v=e.handleCloseModal,j=void 0===v?{handleCloseModal:j}:v;return(0,c.jsxs)("div",{children:[(0,c.jsx)("button",{className:"filter_btn_admin",onClick:u,children:(0,c.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/1159/1159641.png",width:"30px"})}),(0,c.jsx)(D.Z,{open:f,onClose:h,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,c.jsxs)("div",{className:"box_filter",children:[(0,c.jsx)("button",{className:"closebtn",onClick:j,children:"\xd7"}),(0,c.jsx)("h2",{style:{margin:"1rem auto",fontSize:"30px"},children:"Filters"}),(0,c.jsxs)("div",{className:"header_items_center",children:[(0,c.jsxs)("div",{className:"header_items_filter",children:[(0,c.jsx)("span",{className:"date_picker_label",children:"Filter by date"}),(0,c.jsx)("div",{className:"date_picker",children:(0,c.jsx)(A.Z,{setValue:i,value:l})})]}),(0,c.jsx)("button",{className:"filter_btn1",onClick:p,children:"Search"})]}),(0,c.jsxs)("div",{className:"header_items_center",children:[(0,c.jsxs)("div",{className:"header_items_filter",children:[(0,c.jsx)("span",{className:"date_picker_label",children:"Filter between dates from"}),(0,c.jsx)("div",{className:"date_picker",children:(0,c.jsx)(A.Z,{setValue:s,value:t})})]}),(0,c.jsxs)("div",{className:"header_items_filter",children:[(0,c.jsx)("span",{className:"date_picker_label",children:"Filter between dates to"}),(0,c.jsx)("div",{className:"date_picker",children:(0,c.jsx)(A.Z,{setValue:n,value:r})})]}),(0,c.jsx)("button",{className:"filter_btn",onClick:o,children:"Search"})]}),(0,c.jsx)("div",{className:"header_items",children:(0,c.jsxs)("div",{className:"header_items_filter",children:[(0,c.jsx)("span",{className:"filter-market",children:"Filter market wise :"}),(0,c.jsxs)(M.Z,{sx:{m:1,minWidth:150},size:"small",children:[(0,c.jsx)(w.Z,{id:"demo-select-small",children:"Market"}),(0,c.jsx)(Y.Z,{labelId:"demo-select-small",id:"demo-select-small",value:m,label:"Market",onChange:a,children:0!==d.length&&d.map((function(e,a){return(0,c.jsx)(C.Z,{value:e,children:e},a)}))})]}),(0,c.jsx)("button",{className:"filter_btn",onClick:x,children:"Search"})]})})]})})]})}var F=t(1087),T=t(9391),O=function(e){var a=e.handleChangeMarket,t=e.fromDate,s=e.setfromDate,r=e.toDate,n=e.settoDate,l=e.value,i=e.setValue,o=e.handleSearch,d=e.market,h=e.farmersMarket,u=e.open,f=e.setOpen,x=e.handleClose,p=e.handleOpen,v=e.handleSearchmarkets,j=e.handleSearchDate,g=e.filteredInData,b=e.filteredOutData,_=e.purchaseQty,N=e.purchaseAmount,k=e.salesQty,y=e.salesAmount,Z=e.noOfBookedStalls,D=e.totalFarmers,w=(e.farmers,e.Farmers),C=e.Customer,M=[],Y=new Map;w&&w.forEach((function(e){Y.has(e.farmertype)?Y.set(e.farmertype,Y.get(e.farmertype)+1):Y.set(e.farmertype,1)})),Y.forEach((function(e,a){M.push({farmertype:a,count:e})}));var A="#4CAF50",O={summary:[{title:"Farmers Markets",subtitle:"Total Farmers Markets",value:D,percent:100*D/1e4},{title:"Stalls Booked",subtitle:"Stalls of farmers",value:478+Z,percent:100*Z/1e4}]},E={summary:[{title:"Purchased Quantity (Kgs)",subtitle:"Total Quantity Purched",value:_,percent:100*_/1e5},{title:"Purchase (INR)",subtitle:"Total Purchase Amount",value:N,percent:100*N/5e5}]},L={summary:[{title:"Sales Quantity (Kgs)",subtitle:"Total Sales Quantity",value:k,percent:100*k/2e6},{title:"Sales (INR)",subtitle:"Total Sales Amount",value:y,percent:100*y/5e5}]};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("div",{className:"admin_main_component",children:[(0,c.jsx)(W,{style:{width:"10%"},handleChangeMarket:a,fromDate:t,setfromDate:s,toDate:r,settoDate:n,value:l,setValue:i,handleSearch:o,market:d,farmersMarket:h,open:u,setOpen:f,handleClose:x,handleOpen:p,handleSearchmarkets:v,handleSearchDate:j,handleCloseModal:function(){f(!1)}}),(0,c.jsx)("div",{className:"admin_links",children:(0,c.jsxs)("div",{className:"two",children:[(0,c.jsx)(F.rU,{className:"admin_links_details twoDetails",style:{fontWeight:"bold"},to:"../adminrev",children:"Graph for market vs market"}),(0,c.jsx)(F.rU,{className:"admin_links_details twoDetails",style:{fontWeight:"bold"},to:"../adminrevtotal",children:"Graph for a year"}),(0,c.jsx)(F.rU,{className:"admin_links_details twoDetails",style:{fontWeight:"bold"},to:"../livemarkets",children:"Add Live Market Data"})]})}),(0,c.jsxs)("div",{className:"farmers-stats-main farmers-stats-main1",children:[(0,c.jsx)("h2",{className:"overalldata_header stats",style:{width:"200px",fontWeight:"bold"},children:"Farmers Statistics"}),(0,c.jsxs)("div",{className:"farmers-stats-holder",children:[g&&b&&(0,c.jsx)("div",{className:"total-stall-market",style:{fontWeight:"bold"},children:O.summary.map((function(e,a){return(0,c.jsx)("div",{className:"sub_overalldata",style:{fontSize:"10px"},children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{children:[e.title," "]}),(0,c.jsx)(T.Wo,{className:"circularbar",value:e.percent,strokeWidth:6,text:"".concat(e.value),styles:(0,T.y3)({pathColor:(e.percent,A),trailColor:"#d3d3d3",strokeLinecap:"round"}),children:(0,c.jsx)("br",{})})]})},"summary-".concat(a))}))}),(0,c.jsx)("div",{className:"quantity",style:{fontWeight:"bold"},children:g&&b&&(0,c.jsx)("div",{className:"total-quantity",children:E.summary.map((function(e,a){return(0,c.jsx)("div",{className:"sub_overalldata",style:{fontSize:"10px"},children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{children:[e.title," "]}),(0,c.jsx)(T.Wo,{className:"circularbar",value:e.percent,strokeWidth:6,text:"".concat(e.value),styles:(0,T.y3)({pathColor:(e.percent,A),trailColor:"#d3d3d3",strokeLinecap:"round"}),children:(0,c.jsx)("br",{})})]})},"summary-".concat(a))}))})}),(0,c.jsx)("div",{className:"amount",style:{fontWeight:"bold"},children:g&&b&&(0,c.jsx)("div",{className:"total-amount",children:L.summary.map((function(e,a){return(0,c.jsx)("div",{className:"sub_overalldata",style:{fontSize:"10px"},children:(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("span",{children:[e.title," "]}),(0,c.jsx)(T.Wo,{className:"circularbar",value:e.percent,strokeWidth:6,text:"".concat(e.value),styles:(0,T.y3)({pathColor:(e.percent,A),trailColor:"#d3d3d3",strokeLinecap:"round"}),children:(0,c.jsx)("br",{})})]})},"summary-".concat(a))}))})})]})]}),(0,c.jsxs)("div",{className:"farmers-stats-main",style:{textAlign:"center"},children:[(0,c.jsx)("h2",{className:"overalldata_header farmers-type",style:{width:"200px",fontWeight:"bold"},children:"Types of Farmers"}),M&&(0,c.jsx)("div",{className:"cards_container",children:M.map((function(e,a){return(0,c.jsx)(S,{header:e.farmertype,value:e.count},a)}))})]}),(0,c.jsxs)("div",{className:"total-customers",style:{textAlign:"center"},children:[(0,c.jsx)("h2",{className:"overalldata_header no-consumers",style:{width:"200px",fontWeight:"bold"},children:"Total No. Of Customers"}),C&&(0,c.jsx)("div",{className:"customers_count",children:C.length})]}),(0,c.jsx)("div",{className:"admin-links",children:(0,c.jsxs)("div",{className:"one",children:[(0,c.jsx)(F.rU,{className:"admin_links_details admin_links_details_lists ",to:"../listoffarmers",style:{width:"250px",fontWeight:"bold"},children:"Farmers List"}),(0,c.jsx)(F.rU,{className:"admin_links_details admin_links_details_lists ",to:"/admin/checklist",style:{width:"250px",fontWeight:"bold"},children:"CheckList"}),(0,c.jsx)(F.rU,{className:"admin_links_details admin_links_details_lists",to:"../listofCustomers",style:{width:"250px",fontWeight:"bold"},children:"Customers List"}),(0,c.jsx)(F.rU,{className:"admin_links_details admin_links_details_lists",to:"../cancelledstalls",style:{width:"250px",fontWeight:"bold"},children:"Cancelled Stalls List"})]})})]}),!g&&!b&&!w&&(0,c.jsx)(m.Z,{})]})},E=function(e){var a=e.Farmers,t=(0,l.useState)([]),s=(0,n.Z)(t,2),r=s[0],i=s[1],o="https://wingrowmarket.com:8443/";return console.log(o),(0,l.useEffect)((function(){function e(){return(e=(0,p.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_().get(o+"subData").then((function(e){console.log("hello");var a=e.data;console.log(a),i(a)})).catch((function(e){console.log("couldnt fetch data")}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),(0,c.jsx)(c.Fragment,{children:r&&(0,c.jsx)("div",{className:"cancellation_feed",children:(0,c.jsxs)("div",{className:"cancellation_feed_container",children:[(0,c.jsx)("h2",{className:"cancellation_header",children:"Subscription Data"}),(0,c.jsx)("div",{className:"cancellation_body",children:r&&0!==r.length&&r.map((function(e,t){var s=a&&a.filter((function(a){return a._id===e.userId}));return console.log(s),s&&0!==s.length&&(0,c.jsxs)("div",{className:"cancellation_card",children:[(0,c.jsx)("h2",{style:{textAlign:"center",padding:"0.5rem",textTransform:"capitalize"},children:s[0].firstname+" "+s[0].lastname}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Phone No : "}),s[0].phone]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:" Startdate: "}),e.date]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:" validity : "}),e.validity]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:" Stalls left :"}),e.stalls]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:" Status :"}),e.status]})]},t)}))}),(0,c.jsx)(F.rU,{style:{marginTop:"10px",marginLeft:"125px"},className:"backbtn green",to:"/admin",children:"Back"})]})})})},L=t(1413),I=(t(1817),t(6457)),P=t(6525),U=(t(5462),t(786));t(741),I.Z.getCurrentUser();var B=function(e){var a=e.farmersMarket,t=((0,i.s0)(),(0,l.useState)()),s=(0,n.Z)(t,2),r=s[0],o=s[1],d=(0,l.useState)(),h=(0,n.Z)(d,2),u=h[0],f=h[1],x=(0,i.UO)().Id,p=((new Date).toISOString().slice(0,10),(0,l.useState)(null)),v=(0,n.Z)(p,2),b=v[0],_=v[1],N=(0,l.useState)(""),k=(0,n.Z)(N,2),y=k[0],S=(k[1],l.useState("")),D=(0,n.Z)(S,2),A=D[0],W=D[1],T=(0,l.useState)(!1),O=(0,n.Z)(T,2),E=(O[0],O[1]),I={Tarkari:0,Exotic:0,"Onion-Potato":0,Masala:0,Antic:0,SHG:0},B={Tarkari:18,Exotic:1,"Onion-Potato":2,Masala:1,Antic:1,SHG:4},V=(0,l.useState)(!1),z=(0,n.Z)(V,2),q=(z[0],z[1],(0,l.useState)({})),Q=(0,n.Z)(q,2),R=Q[0],H=Q[1],K=(0,l.useState)(!1),$=(0,n.Z)(K,2),G=$[0],J=$[1];(0,l.useEffect)((function(){f(!0),P.Z.getBookedStalls().then((function(e){o(e.data),f(!1)}))}),[b,x]);var X=[];return X.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"head",children:"Stall name"}),(0,c.jsx)("th",{className:"head",children:"Used"}),(0,c.jsx)("th",{className:"head",children:"Left"})]})),["Tarkari","Exotic","Onion-Potato","Masala","Antic","SHG"].forEach((function(e){X.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"child",children:e}),(0,c.jsx)("th",{className:"child",children:R[e]}),(0,c.jsx)("th",{className:"child",children:B[e]-R[e]})]}))})),(0,c.jsx)(c.Fragment,{children:u?(0,c.jsx)(m.Z,{}):(0,c.jsx)("div",{className:"Test",children:(0,c.jsxs)("div",{className:"main_container_stalls",children:[(0,c.jsx)(F.rU,{className:"backbtn green",to:"/admin",sx:{m:2},style:{padding:"8px 20px 8px 20px",marginTop:NaN,marginLeft:"10px"},children:"Back"}),(0,c.jsxs)(g.ZP,{className:"input-div-holder",container:!0,spacing:2,children:[(0,c.jsxs)(g.ZP,{item:!0,xs:12,sm:6,children:[(0,c.jsx)(w.Z,{className:"stall-booking-lable",children:"Enter Booking Date"}),console.log(b),(0,c.jsx)(U.M,{fullWidth:!0,className:"textfield",renderInput:function(e){return(0,c.jsx)(j.Z,(0,L.Z)((0,L.Z)({},e),{},{size:"big",helperText:null}))},value:b,onChange:function(e){var a=e.$d,t=a.getFullYear(),s=String(a.getMonth()+1).padStart(2,"0"),r=String(a.getDate()).padStart(2,"0"),n="".concat(t,"-").concat(s,"-").concat(r);new Date(e.toISOString().slice(0,10));_(n),W("")},defaultValue:new Date}),y&&(0,c.jsx)(Z.Z,{variant:"subtitle1",color:"error",children:y})]}),(0,c.jsx)(g.ZP,{style:{margin:"auto",marginTop:"1.8rem"},item:!0,xs:12,sm:6,children:(0,c.jsxs)(M.Z,{sx:{m:1,minWidth:150},size:"large",children:[(0,c.jsx)(w.Z,{id:"demo-select-small",children:"Market"}),(0,c.jsx)(Y.Z,{labelId:"demo-select-small",id:"demo-select-small",value:A,label:"Market",onChange:function(e){W(e.target.value);var a=r&&r.filter((function(e){return e.bookedAt==b}));console.log(a);var t=a&&a.filter((function(a){return a.location==e.target.value}));console.log(t),t&&t.forEach((function(e){I[e.stallName]+=1})),console.log(I),H(I),console.log(R)},children:0!==a.length&&a.map((function(e,a){return(0,c.jsx)(C.Z,{value:e,children:e},a)}))})]})}),(0,c.jsx)("button",{className:"filter_btn1",onClick:function(){H(I),E(!0),J(!0)},children:"Search"})]}),(0,c.jsx)(g.ZP,{container:!0,justify:"center",alignItems:"center",flexDirection:"column",children:G?(0,c.jsx)("table",{id:"table",children:X}):console.log("no")})]})})})},V=function(){(0,i.s0)();var e=(0,i.TH)().state,a=e.arr1,t=e.array1,s=e.array2;console.log(t);var r=[];return r.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"head",children:"Stall name"}),(0,c.jsx)("th",{className:"head",children:"Used"}),(0,c.jsx)("th",{className:"head",children:"Left"})]})),a.forEach((function(e){r.push((0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"child",children:e}),(0,c.jsx)("th",{className:"child",children:t[e]}),(0,c.jsx)("th",{className:"child",children:s[e]-t[e]})]}))})),(0,c.jsx)("div",{className:"test",children:(0,c.jsxs)("div",{className:"main_container_stalls",children:[(0,c.jsx)(F.rU,{className:"backbtn green",to:"/admin/checkList",sx:{m:2},style:{padding:"8px 20px 8px 20px",marginTop:NaN,marginLeft:"10px"},children:"Back"}),(0,c.jsx)("div",{className:"checkListSolnMain",children:(0,c.jsx)("table",{id:"table",children:r})})]})})},z=t(773);h.kL.register(h.ZL,h.uw,h.f$,h.u,h.De);var q=function(e){var a=e.Inward,t=e.Outward,s=[],r=[],i=[0,0,0,0,0,0,0,0,0,0,0,0],o=(0,l.useState)({year:""}),d=(0,n.Z)(o,2),m=d[0],h=d[1],f=function(){var e=(0,p.Z)((0,x.Z)().mark((function e(){return(0,x.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(m.year);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();s=a&&a.filter((function(e){var a=e.time.split("T");return(0,n.Z)(a,1)[0].substring(0,4)===m.year})),r=t&&t.filter((function(e){var a=e.time.split("T");return(0,n.Z)(a,1)[0].substring(0,4)===m.year})),s&&s.forEach((function(e){var a=e.time.split("T"),t=(0,n.Z)(a,1)[0],s=e.purchase_quantity,r=e.purchase_rate,l=Number(t.substring(5,7)),c=s*r;i[l-=1]=c,console.log(l)})),r&&r.forEach((function(e){var a=e.time.split("T"),t=(0,n.Z)(a,1)[0],s=Number(t.substring(5,7));s-=1;var r=e.sales_quantity*e.sales_rate;i[s]-=r,console.log(s)}));var v={labels:["January","February","March","April","May","June","July","August","September","October","Novemeber","December"],datasets:[{label:"Data",backgroundColor:"green",borderColor:"black",borderWidth:1,data:i}]};return(0,c.jsxs)("div",{className:"adminMain",children:[(0,c.jsxs)("div",{className:"year",children:[(0,c.jsx)(z.qi,{defaultValue:"YYYY",start:2015,end:2025,reverse:!0,value:m.year,onChange:function(e){h((function(a){return(0,L.Z)((0,L.Z)({},a),{},{year:e})}))},id:"year",classes:"dropdown"}),(0,c.jsx)("button",{type:"button",onClick:function(){return f()},children:"Submit"})]}),(0,c.jsxs)("div",{style:{padding:"20px",width:"80%"},children:[(0,c.jsx)("h1",{children:"hello"}),(0,c.jsx)(u.$Q,{data:v,options:{}})]})]})},Q=function(e){var a=e.Farmers;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"farmers_data_entries",children:(0,c.jsxs)("div",{className:"farmers_entries",children:[(0,c.jsxs)("div",{className:"farmers_entries_nav",children:[(0,c.jsx)("span",{className:"farmers_entries_nav_farmername",children:"Name"}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:"Type"}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmersContact",children:"Contact"}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmersaddress",children:"Address"})]}),(0,c.jsxs)("div",{className:"farmers_entries_body",children:[a&&a.map((function(e,a){return(0,c.jsxs)("div",{className:"farmers_entries_section",children:[(0,c.jsxs)("span",{className:"farmers_entries_nav_farmername",children:[e.firstname," ",e.lastname]}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:e.farmertype}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmersContact",children:e.phone}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmersaddress",children:e.address})]},a)})),(0,c.jsx)(F.rU,{style:{marginTop:"10px",marginLeft:"125px"},className:"backbtn green",to:"/admin",children:"Back"})]})]})})})},R=function(e){var a=e.Customer;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"farmers_data_entries",children:(0,c.jsxs)("div",{className:"farmers_entries",children:[(0,c.jsxs)("div",{className:"farmers_entries_nav",children:[(0,c.jsx)("span",{className:"farmers_entries_nav_farmername",children:"Customers Name"}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:"Phone No."}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmersaddress",children:"Address"})]}),(0,c.jsxs)("div",{className:"farmers_entries_body",children:[a&&0!==a.length&&a.map((function(e,a){return(0,c.jsxs)("div",{className:"farmers_entries_section",children:[(0,c.jsxs)("span",{className:"farmers_entries_nav_farmername",children:[e.firstname," ",e.lastname]}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:e.phone}),(0,c.jsx)("span",{className:"farmers_entries_nav_farmerstype",children:e.address})]},a)})),!a&&(0,c.jsx)(m.Z,{}),a&&0===a.length&&(0,c.jsx)("div",{className:"farmers_entries_section",children:"No data available"}),(0,c.jsx)(F.rU,{style:{marginTop:"10px",marginLeft:"125px"},className:"backbtn green",to:"/admin",children:"Back"})]})]})})})},H=function(e){var a=e.CancelledStalls,t=e.Farmers,s=e.handleRefundDelete;return(0,c.jsx)(c.Fragment,{children:a&&(0,c.jsx)("div",{className:"cancellation_feed",children:(0,c.jsxs)("div",{className:"cancellation_feed_container",children:[(0,c.jsx)("h2",{className:"cancellation_header",children:"Cancellation Data"}),(0,c.jsxs)("div",{className:"cancellation_body",children:[a&&0!==a.length&&a.map((function(e,a){var r=t&&t.filter((function(a){return a._id===e.bookedBy}));return console.log(r),0!==r.length&&(0,c.jsxs)("div",{className:"cancellation_card",children:[(0,c.jsx)("h2",{style:{textAlign:"center",padding:"0.5rem",textTransform:"capitalize"},children:r[0].firstname+" "+r[0].lastname}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Phone No : "}),r[0].phone]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Stall Address : "}),e.address]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Cancellation Date : "}),e.cancelledAt]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Booked Date : "}),e.bookedAt]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Stall Name :"}),e.stallName]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("b",{children:"Refund Status :"}),"Not Refunded"]}),(0,c.jsx)("div",{className:"refund_btn_wrapper",children:(0,c.jsx)("button",{className:"refund_btn",id:e._id,onClick:s,children:"Mark as Refunded"})})]},a)})),a&&0===a.length&&(0,c.jsx)("h2",{style:{margin:"auto"},children:"No Cancellation Data!"}),!a&&(0,c.jsx)(m.Z,{})]}),(0,c.jsx)(F.rU,{style:{marginTop:"10px",marginLeft:"125px"},className:"backbtn green",to:"/admin",children:"Back"})]})})})},K=t(5653),$=t(6456),G=t(7892),J=t.n(G),X=function(){var e=(0,l.useState)(),a=(0,n.Z)(e,2),t=a[0],d=a[1],m=(0,l.useState)(),h=(0,n.Z)(m,2),u=h[0],x=h[1],p=(0,l.useState)(J()(Date.now()).format("YYYY-MM-DD")),v=(0,n.Z)(p,2),j=v[0],g=v[1],b=(0,l.useState)(),N=(0,n.Z)(b,2),y=N[0],Z=N[1],S=(0,l.useState)(),D=(0,n.Z)(S,2),w=D[0],C=D[1],M=(0,l.useState)(J()(Date.now()).format("YYYY-MM-DD")),Y=(0,n.Z)(M,2),A=Y[0],W=Y[1],F=(0,l.useState)(J()(Date.now()).format("YYYY-MM-DD")),T=(0,n.Z)(F,2),L=T[0],I=T[1],U=l.useState(""),z=(0,n.Z)(U,2),G=z[0],X=z[1],ee=(0,l.useState)(),ae=(0,n.Z)(ee,2),te=ae[0],se=ae[1],re=(0,l.useState)([]),ne=(0,n.Z)(re,2),le=ne[0],ie=ne[1],ce=(0,l.useState)([]),oe=(0,n.Z)(ce,2),de=oe[0],me=oe[1],he=(0,l.useState)([]),ue=(0,n.Z)(he,2),fe=ue[0],xe=ue[1],pe=new Date("04/15/2023"),ve=new Date;ve=J()(ve).format("MM/DD/YYYY");var je=new Date(ve).getTime()-pe.getTime(),ge=Math.floor(je/864e5),be=Math.floor(ge/7),_e=ge%7,Ne=0+8*be+[2,2,3,4,5,7,8][_e];console.log(Ne),console.log(ge,be,_e);var ke=l.useState(!1),ye=(0,n.Z)(ke,2),Ze=ye[0],Se=ye[1],De=function(){Se(!0)},we=function(){Se(!1)},Ce=(0,l.useState)(),Me=(0,n.Z)(Ce,2),Ye=Me[0],Ae=Me[1],We=(0,l.useState)(),Fe=(0,n.Z)(We,2),Te=Fe[0],Oe=Fe[1],Ee=function(e){X(e.target.value)};(0,l.useEffect)((function(){P.Z.getBookedStalls().then((function(e){var a=null===e||void 0===e?void 0:e.data;ie(a),me(a)})),P.Z.getInwardData().then((function(e){d(null===e||void 0===e?void 0:e.data),Z(null===e||void 0===e?void 0:e.data)})),P.Z.getOutwardData().then((function(e){x(null===e||void 0===e?void 0:e.data),C(null===e||void 0===e?void 0:e.data)})),P.Z.getcancelledStalls().then((function(e){se(null===e||void 0===e?void 0:e.data)})),K.Z.getFarmers().then((function(e){Ae(null===e||void 0===e?void 0:e.data)})),K.Z.getUsers().then((function(e){Oe(null===e||void 0===e?void 0:e.data)}))}),[]),(0,l.useEffect)((function(){P.Z.getMyStalls().then((function(e){if(e){var a=e.data;console.log("hey",a),xe(a)}}))}),[]);var Le=new Set,Ie=new Set,Pe=new Set,Ue=[],Be=0,Ve=0,ze=0,qe=0,Qe=null===le||void 0===le?void 0:le.length;t&&t.forEach((function(e){Pe.add(e.market)})),y&&y.forEach((function(e){Le.add(e.market),Ie.add(e.userId),Be+=e.purchase_quantity,Ve+=e.purchase_rate})),w&&w.forEach((function(e){ze+=e.sales_quantity,qe+=e.sales_rate}));var Re=new Set;fe&&fe.forEach((function(e){Re.add(e.location)}));var He=(0,r.Z)(Re);console.log(He);var Ke,$e=function(){var e=t&&t.filter((function(e){return e.market===G}));Z(e),we()},Ge=function(){var e=t&&t.filter((function(e){var a=e.time.split("T");return(0,n.Z)(a,1)[0]===J()(j).format("YYYY-MM-DD")})),a=u&&u.filter((function(e){var a=e.time.split("T");return(0,n.Z)(a,1)[0]===J()(j).format("YYYY-MM-DD")}));console.log(de),ie(de),console.log("before",le);var s=de&&de.filter((function(e){return e.bookedAt===J()(j).format("YYYY-MM-DD")}));console.log("after",s),ie(s),Z(e),C(a),we()},Je=function(){var e=t.filter((function(e){var a=e.time.split("T"),t=(0,n.Z)(a,1)[0];return t>=J()(A).format("YYYY-MM-DD")&&t<=J()(L).format("YYYY-MM-DD")})),a=u&&u.filter((function(e){var a=e.time.split("T"),t=(0,n.Z)(a,1)[0];return t>=J()(A).format("YYYY-MM-DD")&&t<=J()(L).format("YYYY-MM-DD")})),s=le&&le.filter((function(e){var a=e.bookedAt.split("T"),t=(0,n.Z)(a,1)[0];return t>=J()(A).format("YYYY-MM-DD")&&t<=J()(L).format("YYYY-MM-DD")}));ie(s),Z(e),C(a),we()},Xe=(0,s.Z)(Pe);try{for(Xe.s();!(Ke=Xe.n()).done;){var ea=Ke.value;Ue.push(ea)}}catch(aa){Xe.e(aa)}finally{Xe.f()}return(0,c.jsx)(i.Z5,{children:(0,c.jsxs)(i.AW,{path:"/",element:(0,c.jsx)(o,{}),children:[(0,c.jsx)(i.AW,{index:!0,element:(0,c.jsx)(O,{handleChangeMarket:Ee,fromDate:A,setfromDate:W,toDate:L,settoDate:I,value:j,setValue:g,handleSearch:Je,market:G,farmersMarket:Ue,open:Ze,setOpen:Se,handleClose:we,handleOpen:De,handleSearchmarkets:$e,handleSearchDate:Ge,filteredInData:y,filteredOutData:w,purchaseQty:Be,purchaseAmount:Ve,salesQty:ze,salesAmount:qe,noOfBookedStalls:Qe,totalFarmers:Ne,farmers:Ie,Farmers:Ye,Customer:Te})}),(0,c.jsx)(i.AW,{path:"/adminrev",element:(0,c.jsx)(f,{filterIn:y,filterOut:w,handleChangeMarket:Ee,fromDate:A,setfromDate:W,toDate:L,settoDate:I,value:j,market:G,farmersMarket:Ue,setValue:g,handleSearch:Je,open:Ze,setOpen:Se,handleClose:we,handleOpen:De,handleSearchmarkets:$e,handleSearchDate:Ge})}),(0,c.jsx)(i.AW,{path:"/adminrevtotal",element:(0,c.jsx)(q,{Inward:t,Outward:u})}),(0,c.jsx)(i.AW,{path:"/livemarkets",element:(0,c.jsx)(k,{})}),(0,c.jsx)(i.AW,{path:"/listoffarmers",element:(0,c.jsx)(Q,{Farmers:Ye})}),(0,c.jsx)(i.AW,{path:"/checkList",element:(0,c.jsx)(B,{farmersMarket:Ue})}),(0,c.jsx)(i.AW,{path:"/listofCustomers",element:(0,c.jsx)(R,{Customer:Te})}),(0,c.jsx)(i.AW,{path:"/subscriptionList",element:(0,c.jsx)(E,{Farmers:Ye})}),(0,c.jsx)(i.AW,{path:"/cancelledstalls",element:(0,c.jsx)(H,{Farmers:Ye,CancelledStalls:te,handleRefundDelete:function(e){var a=e.target.id;!0===window.confirm("Confirm Refunded?")&&_().delete("https://wingrowmarket.com:8443/cancelledstalls",{headers:(0,$.Z)(),data:{id:a}}).then((function(e){var a=null===e||void 0===e?void 0:e.data,t=te.filter((function(e){return e._id!==a._id}));se(t)}))}})}),(0,c.jsx)(i.AW,{path:"/checklistsoln",element:(0,c.jsx)(V,{})})]})})}},3223:function(e,a,t){t.d(a,{Z:function(){return d}});var s=t(1413),r=(t(2791),t(6314)),n=t(7391),l=t(6571),i=t(7792),c=t(7607),o=t(184);function d(e){var a=e.setValue,t=e.value;return(0,o.jsx)(l._,{dateAdapter:i.y,children:(0,o.jsx)(r.Z,{spacing:3,children:(0,o.jsx)(c.$,{label:"Date",inputFormat:"MM/DD/YYYY",value:t,onChange:function(e){a(e)},renderInput:function(e){return(0,o.jsx)(n.Z,(0,s.Z)({},e))}})})})}},5653:function(e,a,t){var s=t(4569),r=t.n(s),n=t(6456),l="https://wingrowmarket.com:8443/",i={getPublicContent:function(){return r().get(l+"all")},getStallsData:function(){return r().get(l+"stalls",{headers:(0,n.Z)()})},getAdminData:function(){return r().get(l+"admin",{headers:(0,n.Z)()})},getInOutdata:function(){return r().get(l+"inwardoutward",{headers:(0,n.Z)()})},getFarmers:function(){return r().get(l+"farmer",{headers:(0,n.Z)()})},getAllUsers:function(){return r().get(l+"allusers",{headers:(0,n.Z)()})},getUsers:function(){return r().get(l+"users",{headers:(0,n.Z)()})},getSub:function(e){return r().post(l+"sub1",{userId:e})},postSub:function(e,a,t,s){return r().post(l+"sub",{date:e,userId:a,stalls:t,validity:s},{headers:(0,n.Z)()})},getMarket:function(){return r().get(l+"getmarket")},getMarkets:function(){return r().get(l+"getmarkets")}};a.Z=i}}]);
//# sourceMappingURL=512.24c89a48.chunk.js.map