"use strict";(self.webpackChunkwingrow=self.webpackChunkwingrow||[]).push([[325],{77325:function(e,o,s){s.r(o),s.d(o,{default:function(){return C}});var n=s(4942),t=s(1413),l=s(29439),a=s(72791),i=s(36151),r=s(27391),c=s(96656),u=s(68096),m=s(20890),d=s(94925),g=s(64387),h=s(57689),p=s(11087),f=s(36457),x=s(21840),v=s(75985),w=(s(5462),s(1664)),b=s(44252),j=s(80184),Z=f.Z.getCurrentUser();function C(e){var o=e.date,s=e.t;(0,a.useEffect)((function(){Z&&(f.Z.logout().then((function(){v.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})),window.location.reload())}),[]);var C,N,y,O=(0,h.s0)(),S=(0,h.TH)().state,k=(0,a.useState)(!1),A=(0,l.Z)(k,2),z=(A[0],A[1]),L=(0,b.Z)().width;(0,a.useEffect)((function(){z(L<850)}),[L]),null===S?C="login":(N=S.id,C=S.path,y=S.bookedStalls),console.log("hello",C),console.log("date is ",o);var P=(0,a.useState)(!1),B=(0,l.Z)(P,2),F=B[0],H=B[1],T=(0,a.useState)({phone:"",password:"hello"}),_=(0,l.Z)(T,2),I=_[0],R=_[1];function q(e){try{var o=(0,w.S)(e);return console.log("hi",o),o.isValid()}catch(s){return!1}}return(0,j.jsxs)("div",{className:"authContainer",children:[(0,j.jsx)(v.Ix,{position:"top-right",autoClose:1e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),(0,j.jsx)(v.Ix,{}),F?(0,j.jsx)(x.Z,{}):(0,j.jsxs)("div",{className:"authbox",children:[(0,j.jsx)("img",{className:"login_image",src:"./images/2.png",alt:"logo"}),(0,j.jsxs)("form",{autocomplete:"new-password",onSubmit:function(e){if(e.preventDefault(),I.phone){var s=q(I.phone);console.log("hello",s),H(!0),f.Z.login(I.phone,I.role,I.password).then((function(e){"farmer"===e.role&&(v.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){"login"===C?O("/farmers"):O("/home/temp/stallsTemp/${Id}/paymentpage",{state:{bookStall:y,d:o}}),window.location.reload()}),1e3)),"admin"===e.role&&(v.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){O("/admin"),window.location.reload()}),1e3)),"employee"===e.role&&(v.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){O("/employee"),window.location.reload()}),1e3)),"customer"===e.role&&(v.Am.success("Login successful!",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){O("/customers"),window.location.reload()}),1e3)),H(!1)}),(function(e){console.log(e),v.Am.warn("Login failed",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),R({phone:"",password:""}),H(!1)}))}else v.Am.warn("data invalid",{position:"top-center",autoClose:1e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},className:"login_details",children:[(0,j.jsx)("img",{className:"form-logo",src:".\\images\\logo.png",alt:"form-logo"}),(0,j.jsx)(m.Z,{component:"h1",variant:"h5",className:"form-link",children:(0,j.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"20px"},children:s("welcome_message")})}),(0,j.jsx)(m.Z,{mt:2,component:"h1",variant:"h5",children:(0,j.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"20px"},children:s("login_here")})}),(0,j.jsx)(r.Z,{sx:{width:"80%",marginLeft:"0rem"},inputProps:{autoComplete:"off"},inputlabelprops:{style:{fontSize:16,fontFamily:"Arturo"}},margin:"normal",required:!0,fullWidth:!0,id:"phone",label:"Mobile Number",name:"phone",value:I.phone,autoFocus:!0,color:"success",className:"heading input",onChange:function(e){var o=e.target,s=o.name,l=o.value,a=q(l);console.log("hello--",a),R((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,n.Z)({},s,l))}))}}),(0,j.jsxs)(u.Z,{className:"textfield",sx:{width:"80%",marginLeft:"0rem",fontSize:"14"},children:[(0,j.jsx)(d.Z,{inputlabelprops:{style:{fontSize:14,fontFamily:"Arturo"}},id:"demo-simple-select-helper-label",children:(0,j.jsx)("span",{className:"heading",children:"Role"})}),(0,j.jsxs)(c.Z,{sx:{width:"100%",marginLeft:"0rem"},inputProps:{autoComplete:"off"},inputlabelprops:{style:{fontSize:16,fontFamily:"Arturo"}},margin:"normal",required:!0,fullWidth:!0,id:"role",label:"Role",name:"role",value:I.role,autoFocus:!0,color:"success",className:"heading input",onChange:function(e){var o=e.target,s=o.name,l=o.value;R((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,n.Z)({},s,l))}))},children:[(0,j.jsx)(g.Z,{sx:{fontSize:"1.3rem",fontFamily:"Arturo"},value:"farmer",children:(0,j.jsx)("span",{className:"heading3",children:"farmer"})}),(0,j.jsx)(g.Z,{sx:{fontSize:"1.3rem",fontFamily:"Arturo"},value:"customer",children:(0,j.jsx)("span",{className:"heading3",children:"customer"})}),(0,j.jsx)(g.Z,{sx:{fontSize:"1.3rem",fontFamily:"Arturo"},value:"admin",children:(0,j.jsx)("span",{className:"heading3",children:"admin"})})]})]}),(0,j.jsx)(i.Z,{className:"form-btn",type:"submit",color:"success",variant:"contained",size:"large",sx:{mt:3,mb:2},children:s("login")}),(0,j.jsxs)(m.Z,{className:"form-link",mt:2,children:[(0,j.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"15px"},children:s("new_to_wingrow")}),(0,j.jsx)(p.rU,{to:{pathname:"/Register",state:{path:"stall",id:N,bookedStalls:y}},children:s("register")})]})]})]}),(0,j.jsx)("div",{className:"pageBottom",style:{height:"100px"}})]})}}}]);
//# sourceMappingURL=325.14f042a4.chunk.js.map