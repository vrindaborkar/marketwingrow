"use strict";(self.webpackChunkwingrow=self.webpackChunkwingrow||[]).push([[325],{7325:function(e,o,s){s.r(o),s.d(o,{default:function(){return v}});var n=s(4942),t=s(1413),l=s(9439),a=s(2791),i=s(6151),r=s(7391),c=s(890),g=s(7689),u=s(1087),d=s(6457),p=s(1840),h=s(5985),m=(s(5462),s(9166),s(1664)),f=s(184),w=d.Z.getCurrentUser();function v(e){var o=e.date,s=e.t;(0,a.useEffect)((function(){w&&(d.Z.logout().then((function(){h.Am.success("Login successful!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})})),window.location.reload())}),[]);var v,b,x,C=(0,g.s0)(),O=(0,g.TH)().state;null===O?v="login":(b=O.id,v=O.path,x=O.bookedStalls),console.log("hello",v),console.log("date is ",o);var j=(0,a.useState)(!1),k=(0,l.Z)(j,2),Z=k[0],N=k[1],S=(0,a.useState)({phone:"",password:"hello"}),y=(0,l.Z)(S,2),H=y[0],P=y[1];function A(e){try{var o=(0,m.S)(e);return console.log("hi",o),o.isValid()}catch(s){return!1}}return(0,f.jsxs)("div",{className:"authContainer",children:[(0,f.jsx)(h.Ix,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"light"}),(0,f.jsx)(h.Ix,{}),Z?(0,f.jsx)(p.Z,{}):(0,f.jsxs)("div",{className:"authbox",children:[(0,f.jsx)("img",{className:"login_image",src:"./images/2.png",alt:"logo"}),(0,f.jsxs)("form",{autocomplete:"new-password",onSubmit:function(e){if(e.preventDefault(),H.phone){var s=A(H.phone);console.log("hello",s),N(!0),d.Z.login(H.phone,H.password).then((function(e){"farmer"===e.role&&(h.Am.success("Login successful!",{position:"top-center",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){"login"===v?C("/farmers"):C("/home/temp/stallsTemp/${Id}/paymentpage",{state:{bookStall:x,d:o}}),window.location.reload()}),1e3)),"admin"===e.role&&(h.Am.success("Login successful!",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){C("/admin"),window.location.reload()}),1e3)),"employee"===e.role&&(h.Am.success("Login successful!",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){C("/employee"),window.location.reload()}),1e3)),"customer"===e.role&&(h.Am.success("Login successful!",{position:"top-center",autoClose:2e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),setTimeout((function(){C("/customers"),window.location.reload()}),1e3)),N(!1)}),(function(e){console.log(e),h.Am.warn("Login failed",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),P({phone:"",password:""}),N(!1)}))}else h.Am.warn("data invalid",{position:"top-center",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})},className:"login_details",children:[(0,f.jsx)("img",{className:"form-logo",src:".\\images\\logo.png",alt:"form-logo"}),(0,f.jsx)(c.Z,{component:"h1",variant:"h5",className:"form-link",children:(0,f.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"20px"},children:s("welcome_message")})}),(0,f.jsx)(c.Z,{mt:2,component:"h1",variant:"h5",children:(0,f.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"20px"},children:s("login_here")})}),(0,f.jsx)(r.Z,{sx:{width:"80%",marginLeft:"3rem"},inputProps:{autoComplete:"off"},inputlabelprops:{style:{fontSize:16,fontFamily:"Arturo"}},margin:"normal",required:!0,fullWidth:!0,id:"phone",label:"Mobile Number",name:"phone",value:H.phone,autoFocus:!0,color:"success",className:"heading input",onChange:function(e){var o=e.target,s=o.name,l=o.value,a=A(l);console.log("hello--",a),P((function(e){return(0,t.Z)((0,t.Z)({},e),{},(0,n.Z)({},s,l))}))}}),(0,f.jsx)(i.Z,{className:"form-btn",type:"submit",color:"success",variant:"contained",size:"large",sx:{mt:3,mb:2},children:s("login")}),(0,f.jsxs)(c.Z,{className:"form-link",mt:2,children:[(0,f.jsx)("span",{className:"heading",style:{fontweight:"bold",fontSize:"15px"},children:s("new_to_wingrow")}),(0,f.jsx)(u.rU,{to:{pathname:"/Register",state:{path:"stall",id:b,bookedStalls:x}},children:s("register")})]})]})]})]})}}}]);
//# sourceMappingURL=325.2433b52f.chunk.js.map