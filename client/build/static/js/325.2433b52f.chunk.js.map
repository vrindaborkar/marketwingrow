{"version":3,"file":"static/js/325.2433b52f.chunk.js","mappings":"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","sources":["Routes/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Button from \"@mui/material/Button\";\r\nimport TextField from \"@mui/material/TextField\";\r\nimport Typography from \"@mui/material/Typography\";\r\nimport { Link, useNavigate,useLocation } from \"react-router-dom\";\r\nimport AuthService from \"../services/auth.service\";\r\nimport Spinner from \"../components/Spinner\";\r\nimport { ToastContainer, toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport usePrevLocation from '../hooks/usePrevLocation'\r\nimport { parsePhoneNumberFromString } from 'libphonenumber-js';\r\n\r\nconst user = AuthService.getCurrentUser();\r\n\r\nexport default function SignIn({date, t}) {\r\n  useEffect(() => {\r\n    if (!!user) {\r\n      AuthService.logout().then(\r\n        ()=>{\r\n          toast.success(\"Login successful!\", {\r\n            position: \"top-center\",\r\n            autoClose: 3000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n            theme: \"light\",\r\n          });\r\n          \r\n  \r\n        }\r\n      )\r\n      window.location.reload();\r\n    }\r\n  }, []);\r\n\r\n  const navigate = useNavigate();\r\n  const {state} = useLocation();\r\n\r\n   var path ;\r\n  var id;\r\n  var bookedStalls\r\n  if(state === null){\r\n    path  = 'login'\r\n  }else{\r\n    id = state.id\r\n    path = state.path\r\n    bookedStalls = state.bookedStalls\r\n  }\r\n  //const path =  state.path || null\r\n  console.log(\"hello\",path)\r\n  console.log(\"date is \",date)\r\n  //console.log(\"the prev\",history.location.from)\r\n  const [Loading, setLoading] = useState(false);\r\n  const [data, setData] = useState({\r\n    phone: \"\",\r\n    password: \"hello\",\r\n  });\r\n\r\n  function isValidPhoneNumber(phone) {\r\n    try {\r\n      const phoneNumber = parsePhoneNumberFromString(phone);\r\n      console.log(\"hi\",phoneNumber)\r\n      return phoneNumber.isValid();\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  }\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    const phoneNumber = isValidPhoneNumber(value);\r\n      console.log(\"hello--\",phoneNumber)\r\n    setData((prev) => {\r\n      return {\r\n        ...prev,\r\n        [name]: value,\r\n      };\r\n    });\r\n  };\r\n\r\n  \r\n  \r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    if ( data.phone) {\r\n      const phoneNumber = isValidPhoneNumber(data.phone);\r\n      console.log(\"hello\",phoneNumber)\r\n      // if(phoneNumber.isValid()){\r\n      //   console.log(\"good to go\")\r\n      // }else{\r\n      //   console.log(\"nope\")\r\n      // }\r\n      setLoading(true);\r\n      AuthService.login(data.phone, data.password).then(\r\n        (res) => {\r\n          if (res.role === \"farmer\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 3000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              if(path === 'login'){\r\n                navigate(\"/farmers\");\r\n              }else{\r\n                navigate(\"/home/temp/stallsTemp/${Id}/paymentpage\" ,{state : {bookStall : bookedStalls,d:date}})\r\n              }\r\n              \r\n              window.location.reload();\r\n            }, 1000);\r\n          }\r\n          if (res.role === \"admin\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 2000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/admin\");\r\n            window.location.reload();\r\n            }, 1000);\r\n          }\r\n          if (res.role === \"employee\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 2000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/employee\");\r\n            window.location.reload();\r\n            }, 1000);\r\n          }\r\n          if (res.role === \"customer\") {\r\n            toast.success(\"Login successful!\", {\r\n              position: \"top-center\",\r\n              autoClose: 2000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              draggable: true,\r\n              progress: undefined,\r\n              theme: \"light\",\r\n            });\r\n            setTimeout(() => {\r\n              navigate(\"/customers\");\r\n              window.location.reload();\r\n            }, 1000);\r\n          }\r\n          setLoading(false);\r\n        },\r\n        (error) => {\r\n          console.log(error)\r\n          toast.warn(\"Login failed\", {\r\n            position: \"top-center\",\r\n            autoClose: 5000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            draggable: true,\r\n            progress: undefined,\r\n            theme: \"light\",\r\n          });\r\n          setData({\r\n            phone: \"\",\r\n            password: \"\",\r\n          });\r\n          setLoading(false);\r\n        }\r\n      );\r\n    } else {\r\n      toast.warn(\"data invalid\", {\r\n        position: \"top-center\",\r\n        autoClose: 5000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        draggable: true,\r\n        progress: undefined,\r\n        theme: \"light\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"authContainer\">\r\n      <ToastContainer\r\n        position=\"top-right\"\r\n        autoClose={5000}\r\n        hideProgressBar={false}\r\n        newestOnTop={false}\r\n        closeOnClick\r\n        rtl={false}\r\n        pauseOnFocusLoss\r\n        draggable\r\n        pauseOnHover\r\n        theme=\"light\"\r\n      />\r\n      {/* Same as */}\r\n      <ToastContainer />\r\n      {!Loading ? (\r\n        <div className=\"authbox\">\r\n          <img\r\n            className=\"login_image\"\r\n            src=\"./images/2.png\"\r\n            alt=\"logo\"\r\n          />\r\n          <form autocomplete='new-password' onSubmit={handleLogin} className=\"login_details\">\r\n            \r\n            <img className=\"form-logo\" src=\".\\images\\logo.png\" alt=\"form-logo\" />\r\n            <Typography component=\"h1\" variant=\"h5\" className=\"form-link\">\r\n              <span className=\"heading\" style={{fontweight:'bold', fontSize:'20px'}}>{t(\"welcome_message\")}</span>\r\n            </Typography>\r\n            <Typography mt={2} component=\"h1\" variant=\"h5\">\r\n              <span className=\"heading\" style={{fontweight:'bold', fontSize:'20px'}} >{t(\"login_here\")}</span>\r\n            </Typography>\r\n            <TextField\r\n              sx={{width: \"80%\", marginLeft: \"3rem\"}}\r\n              inputProps={{\r\n                autoComplete: 'off'\r\n              }}\r\n\r\n              inputlabelprops={{\r\n                style: { fontSize: 16, fontFamily: 'Arturo' }, \r\n              }}\r\n              \r\n              margin=\"normal\"\r\n              required\r\n              fullWidth\r\n              id=\"phone\"\r\n              label=\"Mobile Number\"\r\n              name=\"phone\"\r\n              value={data.phone}\r\n              \r\n              autoFocus\r\n              color=\"success\"\r\n              className=\"heading input\"\r\n              // className=\"textfield\"\r\n              onChange={handleChange}\r\n            />\r\n          \r\n           \r\n            {/* <Link className=\"form-link\" to={\"/Forgot\"} variant=\"body2\">\r\n              {t(\"forgot_password\")}\r\n            </Link> */}\r\n            <Button\r\n              className=\"form-btn\"\r\n              type=\"submit\"\r\n              color=\"success\"\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              sx={{ mt: 3, mb: 2 }}\r\n            >\r\n              {t(\"login\")}\r\n            </Button>\r\n            <Typography className=\"form-link\" mt={2}>\r\n              <span className=\"heading\" style={{fontweight:'bold', fontSize:'15px'}}>{t(\"new_to_wingrow\")}</span>\r\n               {/* <Link to=\"/Register\"   variant=\"body2\" className=\"form-link\">\r\n                 Signup with us\r\n              </Link> */}\r\n              <Link to ={{\r\n                pathname: \"/Register\", \r\n                state: { \r\n                  path:'stall',\r\n                  id : id, \r\n                  bookedStalls : bookedStalls\r\n          }\r\n          }} >\r\n                {t(\"register\")}\r\n        </Link>\r\n\r\n            </Typography>\r\n          </form>\r\n        </div>\r\n      ) : (\r\n        <Spinner />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":["user","AuthService","SignIn","_ref","date","t","useEffect","then","toast","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","theme","window","location","reload","path","id","bookedStalls","navigate","useNavigate","state","useLocation","console","log","_useState","useState","_useState2","_slicedToArray","Loading","setLoading","_useState3","phone","password","_useState4","data","setData","isValidPhoneNumber","phoneNumber","parsePhoneNumberFromString","isValid","e","_jsxs","className","children","_jsx","ToastContainer","newestOnTop","rtl","pauseOnFocusLoss","Spinner","src","alt","autocomplete","onSubmit","preventDefault","res","role","setTimeout","bookStall","d","error","Typography","component","variant","style","fontweight","fontSize","mt","TextField","sx","width","marginLeft","inputProps","autoComplete","inputlabelprops","fontFamily","margin","required","fullWidth","label","name","value","autoFocus","color","onChange","_e$target","target","prev","_objectSpread","_defineProperty","Button","type","size","mb","Link","to","pathname"],"sourceRoot":""}